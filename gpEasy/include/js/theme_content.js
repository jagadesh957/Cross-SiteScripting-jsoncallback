$(function(){typeof gpLayouts!="undefined"&&$("body").bind("AdminReady",function(){LayoutSetup()});$(".expand_row").bind("mouseenter",function(){$(this).addClass("hover")}).bind("mouseleave",function(){$(this).removeClass("hover")});var a=!1;gp_getallgadgets&&$("#gp_getallgadgetscall").length==0?a=!0:!gp_getallgadgets&&$("#gp_getallgadgetscall").length==1&&(a=!0);a&&$("#getallgadgets_warning").show();gplinks.layout_id=function(b,a){function c(){$("#layout_ident").hide();$(document).unbind("keydown.layout_close")}
a.preventDefault();var e=$(this).offset();$("#current_color").css("background-color",b);var e=$("#layout_ident").show().css({left:e.left+20,top:e.top}).appendTo("#gp_admin_html"),f=$(e).find("form").get(0);f&&$(this).find("input").each(function(b,a){if(f[a.name])f[a.name].value=a.value});$("#layout_ident a.color").unbind("click").bind("click",function(){$("#current_color").css("background-color",this.rel);f.color.value=this.rel});$("#layout_ident input.cancel").unbind("click").bind("click",function(){c()});
$(document).bind("keydown.layout_close",function(a){a.keyCode===27&&(a.preventDefault(),c())})};$(".draggable_element").live("mouseenter",function(){$this=$(this);if(!$this.hasClass("target")){$this.addClass("hover");$this.find("div").stop(!0,!0).fadeIn();$this.stop(!0).fadeTo("200",1);var a=$this.height();$this.data("ph",a);$this.height("auto").height()<a&&$this.height(a)}}).live("mouseleave",function(){$this.removeClass("hover");$this=$(this);$this.stop(!0).fadeTo("slow",0.5);$this.find("div").stop(!0,
!0).fadeOut();var a=$this.data("ph");parseInt(a)>0&&$this.height(a)})});
function LayoutSetup(){var a=$(".filetype-text"),b=a.offset(),a=a.width(),b=$("#gp_drag_n_drop").show().css({top:b.top,left:b.left+a-300}).appendTo("#gp_admin_html");SimpleDrag("#gp_drag_n_drop",b,"absolute",function(){});$("body").addClass("edit_layout");var h=$('<div class="draggable_droparea" id="theme_content_drop"></div>').appendTo("#gp_admin_html");$(".output_area").each(function(a,b){var c,g,d;d=$(b);c=GetCoords(d);g=d.find(".gplinks");g.length>0&&$('<div class="draggable_element" style="position:absolute;height:5px;width:5px;"></div>').appendTo(h).append(g).fadeTo("fast",
0.5).height(c.h-3).width(c.w-3).bind("gp_position",function(){var a=GetCoords(d);if(a.h<20)d.height(20),a.h=20;if(a.w<20)d.width(20),a.w=20;$(this).css({top:a.top,left:a.left})})});var c=$(".draggable_element");c.trigger("gp_position");window.setInterval(function(){c.trigger("gp_position")},2E3)};