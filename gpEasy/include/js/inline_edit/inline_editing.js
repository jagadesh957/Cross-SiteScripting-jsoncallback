var gp_editing={id:function(a){return $(a).attr("id").substr(13)},new_edit_area:function(a){a=gp_editing.id(a);return gp_editing.get_edit_area(a)},get_path:function(a){a=$("a#ExtraEditLink"+a);return a.length==0?!1:a.attr("href")},get_edit_area:function(a){a=$("#ExtraEditArea"+a);if(a.length==0)return!1;a.addClass("gp_editing");$("#edit_area_overlay_top").hide();$(".ExtraEditLink").remove();$(".editable_area").unbind(".gp");return a},close_editor:function(a,c){c.preventDefault();window.location=strip_from(window.location.href,
"#")},save_changes:function(a,c){c.preventDefault();if(gp_editor){loading();var b=gp_editor.save_path,b=strip_from(b,"#"),d="";b.indexOf("?")>0&&(d=strip_to(b,"?")+"&");d+=gp_editor.gp_saveData();d+="&cmd=save";gpresponse.ck_saved=function(){gp_editor&&(gp_editor.updateElement(),gp_editor.resetDirty(),a=="ck_close"&&gp_editing.close_editor(a,c))};$gp.postC(b,d)}},editor_tools:function(){var a=gp_editing.setdock(!1);$("#ckeditor_top").html("");$("#ckeditor_bottom").html("");SimpleDrag(a.find(".toolbar"),
a,"fixed",function(a){gpui.ckx=a.left;gpui.cky=a.top;if(gpui.ckd)gpui.ckd=!1,gp_editing.setdock(!0);$gp.SaveGPUI()})},setdock:function(a){var c=$("#ckeditor_wrap").show(),b=$("#ckeditor_area").show(),d=$("body"),e;a&&$gp.SaveGPUI();gpui.ckd?(b.addClass("docked"),d.css({"margin-top":"+=30px"}),c.css({height:30}),b.css({top:"auto",left:0,bottom:0}).bind("mouseenter.gpdock",function(){var a=b.height();e&&window.clearTimeout(e);c.stop(!0,!0).animate({height:a},100)}).bind("mouseleave.gpdock",function(){e=
window.setTimeout(function(){c.stop(!0,!0).animate({height:30})},500)})):(b.removeClass("docked"),a&&$("body").css({"margin-top":"-=30px"}),c.css({height:0}),b.css({top:gpui.cky,left:gpui.ckx,bottom:"auto"}).unbind(".gpdock"));return b},strip_special:function(a){return a}};gplinks.ck_close=gp_editing.close_editor;gplinks.ck_save=gp_editing.save_changes;gplinks.ck_docklink=function(){gpui.ckd=!gpui.ckd;gp_editing.setdock(!0)};